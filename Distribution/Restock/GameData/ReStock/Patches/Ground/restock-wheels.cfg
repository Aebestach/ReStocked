// Patches applying art changes to wheels
// Contents:


// RoveMax Model M1
+PART[roverWheel1]:HAS[~RestockIgnore[*]]:FOR[ReStock]
{
  @author = Andrew Cassidy
  @name = restock-wheel-2

  !mesh = DELETE
  MODEL
  {
    model = ReStock/Assets/Ground/restock-wheel-2
  }

  @MODULE[ModuleWheelSuspension] {
    @suspensionTransformName = SuspensionPivot
  }

  @MODULE[ModuleWheelSteering] {
    @steeringTransformName = SteeringPivot
  }

  @MODULE[ModuleWheelDamage] {
    @damagedTransformName = WheelBusted
    @undamagedTransformName = Wheel
  }

  !MODULE[FXModuleLookAtConstraint]

  MODULE
  {
    name = FXModuleLookAtConstraint

    CONSTRAINLOOKFX
    {
      rotatorsName = Link1
      targetName = Link1Target
    }

    CONSTRAINLOOKFX
    {
      rotatorsName = Link2
      targetName = Link2Target
    }
  }

  MODULE
  {
    name = FXModuleConstrainPosition

    matchRotation = true
    matchPosition = false

    CONSTRAINFX
    {
      moversName = LowerBracket
      targetName = Base
    }

    CONSTRAINFX
    {
      moversName = SteeringPivotFollower
      targetName = SteeringPivot
    }

    CONSTRAINFX
    {
      moversName = WheelPivotFollower 
      targetName = WheelPivot
    }
  }

  MODULE
  {
    name = FXModuleLookAtConstraint

    CONSTRAINLOOKFX
    {
      rotatorsName = ShockCylinder
      targetName = ShockPiston
    }

    CONSTRAINLOOKFX
    {
      rotatorsName = ShockPiston
      targetName = ShockCylinder
    }

    CONSTRAINLOOKFX
    {
      rotatorsName = SteeringPiston1
      targetName = SteeringCylinder1
    }

    CONSTRAINLOOKFX
    {
      rotatorsName = SteeringCylinder1
      targetName = SteeringPiston1
    }

    CONSTRAINLOOKFX
    {
      rotatorsName = SteeringPiston2
      targetName = SteeringCylinder2
    }

    CONSTRAINLOOKFX
    {
      rotatorsName = SteeringCylinder2
      targetName = SteeringPiston2
    }
  }
}

// RoveMax M1-F Rover Wheel
+PART[roverWheelM1-F]:HAS[~RestockIgnore[*]]:FOR[ReStock]
{
  @author = Andrew Cassidy
  @name = restock-wheel-4

  !MODEL {}
  MODEL
  {
    model = ReStock/Assets/Ground/restock-wheel-4
  }

  @MODULE[ModuleWheelSuspension] {
    @suspensionTransformName = SuspensionPivot
  }

  @MODULE[ModuleWheelSteering] {
    @steeringTransformName = SteeringPivot
  }

  @MODULE[ModuleWheelDamage] {
    @damagedTransformName = WheelBusted
    @undamagedTransformName = Wheel
  }

  @MODULE[ModuleWheelDeployment] {
    @animationTrfName = restock-wheel-4
    @animationStateName = restock-wheel-4-deploy

  }

  !MODULE[ModulePartVariants] {}

  MODULE
  {
    name = ModulePartVariants
    baseVariant = Orange
    VARIANT
    {
      name = Orange
      displayName = #autoLOC_8007100 // Orange
      themeName = Orange
      primaryColor = #74402B
      secondaryColor = #707070
      GAMEOBJECTS
      {
        Fender_orange = true
        Fender_grey = false
        Fender_cernan = false
      }
    }

    VARIANT
    {
      name = Grey
      displayName = #autoLOC_8007119 // White
      themeName = White
      primaryColor = #ffffff
      secondaryColor = #707070
      GAMEOBJECTS
      {
        Fender_orange = false
        Fender_grey = true
        Fender_cernan = false
      }
    }

    VARIANT
    {
      name = Cernan
      displayName = #LOC_Restock_variant-wheel_broken // Broken
      themeName = Orange
      primaryColor = #74402B
      secondaryColor = #A0A0A0
      GAMEOBJECTS
      {
        Fender_orange = false
        Fender_grey = false
        Fender_cernan = true
      }
    }

    VARIANT
    {
      name = Bare
      displayName = #LOC_Restock_variant-wheel_broken //Bare
      themeName = White
      primaryColor = #707070
      secondaryColor = #707070
      GAMEOBJECTS
      {
        Fender_orange = false
        Fender_grey = false
        Fender_cernan = false
      }
    }
  }

  !MODULE[FXModuleLookAtConstraint] {}

  MODULE
  {
    name = FXModuleLookAtConstraint

    CONSTRAINLOOKFX
    {
      rotatorsName = Link1
      targetName = Link1Target
    }

    CONSTRAINLOOKFX
    {
      rotatorsName = Link2
      targetName = Link2Target
    }
  }

  MODULE
  {
    name = FXModuleConstrainPosition

    matchRotation = true
    matchPosition = false

    CONSTRAINFX
    {
      moversName = LowerBracket
      targetName = UpperBracket
    }

    CONSTRAINFX
    {
      moversName = SteeringPivotFollower
      targetName = SteeringPivot
    }
  }

  MODULE
  {
    name = FXModuleConstrainPosition

    matchRotation = false
    matchPosition = true

    CONSTRAINFX
    {
      moversName = WheelMesh
      targetName = WheelPivotFollower
    }

    CONSTRAINFX
    {
      moversName = WheelMeshBusted
      targetName = WheelPivotFollower
    }
  }

  MODULE
  {
    name = ModuleAdvancedLookAtConstraint

    CONSTRAINLOOKFX
    {
      rotatorsName = SuspensionPiston
      targetName = SuspensionPistonTarget
    }

    CONSTRAINLOOKFX
    {
      rotatorsName = SuspensionCylinder
      targetName = SuspensionCylinderTarget
    }
  }
}
